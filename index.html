<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" type="image/x-icon" href="http://nmoroze.github.io/swap/favicon.ico">

	<title>Swap</title>
	<script src="js/tile.js"></script>
	<script src="js/ai.js"></script>
	<script src="js/levels.js"></script>
	<script src="js/player.js"></script>
	<script src="js/world.js"></script>
	<script src="js/draw.js"></script>
	<script src="js/keypress-1.0.8.min.js"></script>
	<script src="js/input.js"></script>
	<script type="text/javascript">
		window.onload = function() {
			self.focus();
			//http://stackoverflow.com/questions/7425502/how-to-return-integer-from-url-hash-using-javascript
			var level = window.location.hash.match(/\d+/) || 1;
			world.init(level-1, "canvas", "hud", "tip", "myScore");
			document.getElementById("reset").onclick = function() {
				world.resetLevel();
			}
			document.getElementById("doscore").onclick = function() {
				world.sendmyScore();
			}
			
			document.getElementById("skip").onclick = function() {
				world.victory();
			}
			document.getElementById("mute").onclick = function() {
				var music = document.getElementById("music");
				if(music.paused) {
					music.play();
					document.getElementById("mute").innerHTML = "<i class='fa fa-volume-up'></i>";
				}
				else {
					music.pause();
					document.getElementById("mute").innerHTML = "<i class='fa fa-volume-off'></i>&nbsp;&nbsp;";
				}
			}

		}
	</script>
<script>
function scorepost(href, named, scored) {
		    var gform = document.createElement('form');
		    gform.method = 'post';
		    gform.action = href;
		    gform.target = '_top';
		    var input = document.createElement('input');
		        input.setAttribute('name', 'gname');
		        input.setAttribute('value', named);
		        gform.appendChild(input);
		    var input2 = document.createElement('input');
		        input2.setAttribute('name', 'gscore');
		        input2.setAttribute('value', scored);
		        gform.appendChild(input2);
		    document.body.appendChild(gform);
		    gform.submit();
		    document.body.removeChild(gform);
}

</script>
	<audio id="music" src="music.mp3" preload loop></audio>
	<meta property="og:image" content="thumbnail.png" />

 <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<style>
		a.action-btn {
			text-decoration: none;
			color: gray;
		}
		a.action-btn:hover {
			text-decoration: none;
			color: gray;
		}
		body { 
			font-family: "Open Sans", sans-serif; font-weight: 400; 
		background-color: white;
/*			-webkit-transform: rotateZ(0deg);  Activates graphics acceleration and improves performance in some cases... 
*/		}
		#reset {
			float: left;
		}
		/*#skip {
			float: right;
		}*/
		#doscore {
			float: right;
		}
	</style>

</head>
<body>
<div style="width: 640px;text-align: center;margin: 0 auto">
<span id="hud" style="font-size: 24px; margin-left: 110px;"></span>
<span style="float: right;font-size: 36px;"><a href="#" id="mute" class="action-btn"><i class="fa fa-volume-up"></i></a></span>
	<br>
<canvas id="canvas" width="640" height="640" style="box-shadow:0 0 15px darkgrey;"></canvas>
<span style="width: 640px;font-size:18px; display: inline-block;">
	<a href="#" id="reset" class="action-btn"><em>Reset <i class="fa fa-repeat"></i></em></a>
	<a href="#" id="doscore" class="action-btn"><em>Submit Score <i class="fa"></i></em></a>
	<!-- <a href="#" id="skip" class="action-btn"><em>Skip <i class="fa fa-forward"></i></em></a> -->
</span>
<br>
<span id="tip" style="font-size: 24px; text-align: center;"></span>
<br>
</div>	
</body>
</html>
